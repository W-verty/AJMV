var e;function t(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}!function(e){e.valtype=["string","number","boolean","object","array"]}(e||(e={}));class s{errosMessage;warningsMessage;constructor(){this.errosMessage=[],this.warningsMessage=[]}getErrors(){return this.errosMessage}getWarnings(){return this.warningsMessage}validator(e,s){if("object"!=typeof e||null===e)return this.errosMessage.push("Module must be a non-null object"),!1;if(!t(s))return this.errosMessage.push("Base must be a non-null object"),!1;switch(e.type){case"object":return this.validateObjectModule(e,s);case"array":return this.validateArrayModule(e,s);default:this.errosMessage.push(`Invalid module type: ${e.type}`)}return!1}validateObjectModule(s,r){const i=Object.keys(r);for(const e of s.required||[])i.indexOf(e)<0&&this.errosMessage.push(`Required property '${e}' is missing in base object`);for(const a of i){const i=s.properties[a];if(!s.required||s.required.includes(a))if(e.valtype.includes(i.type)){if("object"===i.type){if(!t(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an object`);continue}this.validateObjectModule(i,r[a])}else if("array"===i.type){if(!Array.isArray(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an array`);continue}this.validateArrayModule(i,r[a])}else if(e.valtype.indexOf(typeof r[a])<0){this.errosMessage.push(`Property '${a}' is expected to be of type '${i.type}'`);continue}}else this.errosMessage.push(`Invalid property type for key '${a}': ${i.type}`);else s.requiredTypes?this.errosMessage.push(`Property '${a}' must be included in required array when requiredTypes is true`):this.warningsMessage.push(`Property '${a}' is not defined in module properties`)}return 0===this.errosMessage.length}validateArrayModule(s,r){s.limitedItems&&("number"==typeof s.minItems&&r.length<s.minItems?this.errosMessage.push(`Array has fewer items (${r.length}) than the minimum required (${s.minItems})`):"number"==typeof s.maxItems&&r.length>s.maxItems&&this.errosMessage.push(`Array has more items (${r.length}) than the maximum allowed (${s.maxItems})`));for(let i=0;i<r.length;i++){const a=r[i];if(e.valtype.includes(s.items.type)){if("object"===s.items.type){if(!t(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an object`);continue}this.validateObjectModule(s.items,a)}else if("array"===s.items.type){if(!Array.isArray(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an array`);continue}this.validateArrayModule(s.items,a)}else if(e.valtype.indexOf(typeof a)<0){this.errosMessage.push(`Array item at index ${i} is expected to be of type '${s.items.type}'`);continue}}else this.errosMessage.push(`Invalid item type in array module: ${s.items.type}`)}return 0===this.errosMessage.length}}export{s as AnotherJSONModuleValidator};
