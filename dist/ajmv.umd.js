!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AJMV={})}(this,function(e){"use strict";var t;function s(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}!function(e){e.valtype=["string","number","boolean","object","array"]}(t||(t={}));e.AnotherJSONModuleValidator=class{errosMessage;warningsMessage;constructor(){this.errosMessage=[],this.warningsMessage=[]}getErrors(){return this.errosMessage}getWarnings(){return this.warningsMessage}validator(e,t){if("object"!=typeof e||null===e)return this.errosMessage.push("Module must be a non-null object"),!1;if(!s(t))return this.errosMessage.push("Base must be a non-null object"),!1;switch(e.type){case"object":return this.validateObjectModule(e,t);case"array":return this.validateArrayModule(e,t);default:this.errosMessage.push(`Invalid module type: ${e.type}`)}return!1}validateObjectModule(e,r){const i=Object.keys(r);for(const t of e.required||[])i.indexOf(t)<0&&this.errosMessage.push(`Required property '${t}' is missing in base object`);for(const o of i){const i=e.properties[o];if(!e.required||e.required.includes(o))if(t.valtype.includes(i.type)){if("object"===i.type){if(!s(r[o])){this.errosMessage.push(`Property '${o}' is expected to be an object`);continue}this.validateObjectModule(i,r[o])}else if("array"===i.type){if(!Array.isArray(r[o])){this.errosMessage.push(`Property '${o}' is expected to be an array`);continue}this.validateArrayModule(i,r[o])}else if(t.valtype.indexOf(typeof r[o])<0){this.errosMessage.push(`Property '${o}' is expected to be of type '${i.type}'`);continue}}else this.errosMessage.push(`Invalid property type for key '${o}': ${i.type}`);else e.requiredTypes?this.errosMessage.push(`Property '${o}' must be included in required array when requiredTypes is true`):this.warningsMessage.push(`Property '${o}' is not defined in module properties`)}return 0===this.errosMessage.length}validateArrayModule(e,r){e.limitedItems&&("number"==typeof e.minItems&&r.length<e.minItems?this.errosMessage.push(`Array has fewer items (${r.length}) than the minimum required (${e.minItems})`):"number"==typeof e.maxItems&&r.length>e.maxItems&&this.errosMessage.push(`Array has more items (${r.length}) than the maximum allowed (${e.maxItems})`));for(let i=0;i<r.length;i++){const o=r[i];if(t.valtype.includes(e.items.type)){if("object"===e.items.type){if(!s(o)){this.errosMessage.push(`Array item at index ${i} is expected to be an object`);continue}this.validateObjectModule(e.items,o)}else if("array"===e.items.type){if(!Array.isArray(o)){this.errosMessage.push(`Array item at index ${i} is expected to be an array`);continue}this.validateArrayModule(e.items,o)}else if(t.valtype.indexOf(typeof o)<0){this.errosMessage.push(`Array item at index ${i} is expected to be of type '${e.items.type}'`);continue}}else this.errosMessage.push(`Invalid item type in array module: ${e.items.type}`)}return 0===this.errosMessage.length}},Object.defineProperty(e,"__esModule",{value:!0})});
