!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).AJMV={})}(this,function(e){"use strict";var s;function t(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}!function(e){e.valtype=["string","number","boolean","object","array"]}(s||(s={}));e.AnotherJSONModuleValidator=class{errosMessage;warningsMessage;constructor(){this.errosMessage=[],this.warningsMessage=[]}getErrors(){return this.errosMessage}getWarnings(){return this.warningsMessage}validator(e,s){if("object"!=typeof e||null===e)return this.errosMessage.push("Module must be a non-null object"),!1;if(!t(s))return this.errosMessage.push("Base must be a non-null object"),!1;switch(e.type){case"object":return this.validateObjectModule(e,s);case"array":return this.validateArrayModule(e,s);default:this.errosMessage.push(`Invalid module type: ${e.type}`)}return!1}validateObjectModule(e,r){const i=Object.keys(r);for(const s of e.required||[])i.indexOf(s)<0&&this.errosMessage.push(`Required property '${s}' is missing in base object`);for(const a of i){const i=e.properties[a];if(!e.required||e.required.includes(a))if(s.valtype.includes(i.type)){if("object"===i.type){if(!t(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an object`);continue}this.validateObjectModule(i,r[a])}else if("array"===i.type){if(!Array.isArray(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an array`);continue}this.validateArrayModule(i,r[a])}else if(s.valtype.indexOf(typeof r[a])<0){this.errosMessage.push(`Property '${a}' is expected to be of type '${i.type}'`);continue}}else this.errosMessage.push(`Invalid property type for key '${a}': ${i.type}`);else e.requiredTypes?this.errosMessage.push(`Property '${a}' must be included in required array when requiredTypes is true`):this.warningsMessage.push(`Property '${a}' is not defined in module properties`)}return 0===this.errosMessage.length}validateArrayModule(e,r){e.limitedItems&&("number"==typeof e.minItems&&r.length<e.minItems?this.errosMessage.push(`Array has fewer items (${r.length}) than the minimum required (${e.minItems})`):"number"==typeof e.maxItems&&r.length>e.maxItems&&this.errosMessage.push(`Array has more items (${r.length}) than the maximum allowed (${e.maxItems})`));for(let i=0;i<r.length;i++){const a=r[i];if(s.valtype.includes(e.items.type)){if("object"===e.items.type){if(!t(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an object`);continue}this.validateObjectModule(e.items,a)}else if("array"===e.items.type){if(!Array.isArray(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an array`);continue}this.validateArrayModule(e.items,a)}else if(s.valtype.indexOf(typeof a)<0){this.errosMessage.push(`Array item at index ${i} is expected to be of type '${e.items.type}'`);continue}}else this.errosMessage.push(`Invalid item type in array module: ${e.items.type}`)}return 0===this.errosMessage.length}},Object.defineProperty(e,"__esModule",{value:!0})});
