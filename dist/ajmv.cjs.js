"use strict";var e;function s(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.valtype=["string","number","boolean","object","array"]}(e||(e={}));exports.AnotherJSONModuleValidator=class{errosMessage;warningsMessage;constructor(){this.errosMessage=[],this.warningsMessage=[]}getErrors(){return this.errosMessage}getWarnings(){return this.warningsMessage}validator(e,t){if("object"!=typeof e||null===e)return this.errosMessage.push("Module must be a non-null object"),!1;if(!s(t))return this.errosMessage.push("Base must be a non-null object"),!1;switch(e.type){case"object":return this.validateObjectModule(e,t);case"array":return this.validateArrayModule(e,t);default:this.errosMessage.push(`Invalid module type: ${e.type}`)}return!1}validateObjectModule(t,r){const i=Object.keys(r);for(const e of t.required||[])i.indexOf(e)<0&&this.errosMessage.push(`Required property '${e}' is missing in base object`);for(const a of i){const i=t.properties[a];if(!t.required||t.required.includes(a))if(e.valtype.includes(i.type)){if("object"===i.type){if(!s(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an object`);continue}this.validateObjectModule(i,r[a])}else if("array"===i.type){if(!Array.isArray(r[a])){this.errosMessage.push(`Property '${a}' is expected to be an array`);continue}this.validateArrayModule(i,r[a])}else if(e.valtype.indexOf(typeof r[a])<0){this.errosMessage.push(`Property '${a}' is expected to be of type '${i.type}'`);continue}}else this.errosMessage.push(`Invalid property type for key '${a}': ${i.type}`);else t.requiredTypes?this.errosMessage.push(`Property '${a}' must be included in required array when requiredTypes is true`):this.warningsMessage.push(`Property '${a}' is not defined in module properties`)}return 0===this.errosMessage.length}validateArrayModule(t,r){t.limitedItems&&("number"==typeof t.minItems&&r.length<t.minItems?this.errosMessage.push(`Array has fewer items (${r.length}) than the minimum required (${t.minItems})`):"number"==typeof t.maxItems&&r.length>t.maxItems&&this.errosMessage.push(`Array has more items (${r.length}) than the maximum allowed (${t.maxItems})`));for(let i=0;i<r.length;i++){const a=r[i];if(e.valtype.includes(t.items.type)){if("object"===t.items.type){if(!s(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an object`);continue}this.validateObjectModule(t.items,a)}else if("array"===t.items.type){if(!Array.isArray(a)){this.errosMessage.push(`Array item at index ${i} is expected to be an array`);continue}this.validateArrayModule(t.items,a)}else if(e.valtype.indexOf(typeof a)<0){this.errosMessage.push(`Array item at index ${i} is expected to be of type '${t.items.type}'`);continue}}else this.errosMessage.push(`Invalid item type in array module: ${t.items.type}`)}return 0===this.errosMessage.length}};
